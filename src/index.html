<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Tokens</title>
  <meta name="description" content="Calculadora interativa para estimativa de custos de tokens de IA" />



  <!-- Iconify Icons (Web Component) -->
  <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>

  <!-- CSS Customizado -->
  <link rel="stylesheet" href="css/styles.css" />



  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />


</head>

<body class="min-h-screen font-sans selection:bg-primary-100 selection:text-primary-700">
  <!-- Header -->
  <header class="fixed w-full top-0 z-50 glass border-b border-border/40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center gap-3">
          <div class="w-8 h-8 bg-primary text-primary-foreground rounded-lg flex items-center justify-center shadow-sm">
            <iconify-icon icon="hugeicons:calculator-01" class="text-lg"></iconify-icon>
          </div>
          <h1 class="text-lg font-semibold tracking-tight text-foreground">
            Calculadora de Tokens
          </h1>
        </div>

        <div class="flex items-center gap-4">
          <!-- Conversor Real -->
          <div
            class="hidden sm:flex items-center gap-2 bg-secondary/50 rounded-md px-3 py-1.5 border border-transparent hover:border-border transition-colors group/rate">
            <iconify-icon icon="circle-flags:br" class="text-base shadow-sm rounded-full"></iconify-icon>
            <div class="flex items-center">
              <span class="text-xs text-muted-foreground mr-1">R$</span>
              <input type="number" id="usdToBrlRate" placeholder="5.50" step="0.01"
                class="w-12 text-sm bg-transparent border-none outline-none font-medium text-foreground p-0"
                title="Taxa USD para BRL" />
              <span class="text-xs text-muted-foreground">/USD</span>
            </div>
            <button id="refreshExchangeRate"
              class="flex items-center justify-center text-muted-foreground hover:text-primary transition-colors focus:outline-none"
              title="Atualizar cotação">
              <iconify-icon icon="hugeicons:refresh-active" class="text-sm"></iconify-icon>
            </button>
          </div>
          <div class="text-xs font-mono text-muted-foreground/60 bg-secondary/30 px-2 py-1 rounded">
            v2.0.0
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-12">
    <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
      <!-- Formulário de Entrada (Left Column - 5 cols) -->
      <div class="xl:col-span-5 space-y-6">
        <div class="bg-white rounded-2xl shadow-card border border-border p-6 sm:p-8">
          <div class="flex items-center gap-3 mb-8">
            <div class="p-2 bg-primary/10 rounded-lg text-primary">
              <iconify-icon icon="hugeicons:settings-02" class="text-xl"></iconify-icon>
            </div>
            <h2 class="text-xl font-semibold text-foreground tracking-tight">
              Configuração
            </h2>
          </div>

          <form id="tokenForm" class="space-y-8">
            <!-- Valores dos Tokens -->
            <div class="space-y-4">
              <h3 class="text-sm font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-2">
                <iconify-icon icon="hugeicons:coins-dollar" class="text-base"></iconify-icon>
                Preço / 1M Tokens
              </h3>

              <div class="grid grid-cols-3 gap-3">
                <div class="space-y-1.5">
                  <div class="flex items-center gap-1.5">
                    <label for="inputTokenPrice" class="block text-xs font-medium text-muted-foreground">
                      Entrada
                    </label>
                    <div class="group relative flex items-center">
                      <iconify-icon icon="hugeicons:information-circle"
                        class="text-muted-foreground/70 hover:text-primary cursor-help text-xs"></iconify-icon>
                      <div
                        class="invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 p-3 bg-slate-800 text-white text-xs rounded-lg shadow-xl z-50 pointer-events-none">
                        <p class="font-semibold mb-1 text-slate-200">Custo de Leitura (Input)</p>
                        <p class="leading-relaxed text-slate-300">É tudo o que você envia para a IA (prompt, arquivos,
                          contexto). Geralmente é mais barato pois custa menos processamento para "ler".</p>
                        <div
                          class="absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-slate-800">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="relative group">
                    <span class="absolute left-3 top-2.5 text-muted-foreground/60 text-sm">$</span>
                    <input type="number" id="inputTokenPrice" step="0.01" placeholder="3.00"
                      class="w-full pl-6 pr-3 py-2 text-sm border border-input rounded-lg bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all hover:bg-secondary/20" />
                  </div>
                </div>

                <div class="space-y-1.5">
                  <div class="flex items-center gap-1.5">
                    <label for="outputTokenPrice" class="block text-xs font-medium text-muted-foreground">
                      Saída
                    </label>
                    <div class="group relative flex items-center">
                      <iconify-icon icon="hugeicons:information-circle"
                        class="text-muted-foreground/70 hover:text-primary cursor-help text-xs"></iconify-icon>
                      <div
                        class="invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-56 p-3 bg-slate-800 text-white text-xs rounded-lg shadow-xl z-50 pointer-events-none">
                        <p class="font-semibold mb-1 text-slate-200">Custo de Escrita (Output)</p>
                        <p class="leading-relaxed text-slate-300">É o texto gerado pela IA. Custa mais caro (3x-10x)
                          pois exige mais poder computacional para "criar" e raciocinar.</p>
                        <div
                          class="absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-slate-800">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="relative group">
                    <span class="absolute left-3 top-2.5 text-muted-foreground/60 text-sm">$</span>
                    <input type="number" id="outputTokenPrice" step="0.01" placeholder="15.00"
                      class="w-full pl-6 pr-3 py-2 text-sm border border-input rounded-lg bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all hover:bg-secondary/20" />
                  </div>
                </div>

                <div class="space-y-1.5">
                  <div class="flex items-center gap-1.5">
                    <label for="cachedTokenPrice" class="block text-xs font-medium text-muted-foreground">
                      Cache
                    </label>
                    <div class="group relative flex items-center">
                      <iconify-icon icon="hugeicons:information-circle"
                        class="text-muted-foreground/70 hover:text-primary cursor-help text-xs"></iconify-icon>
                      <div
                        class="invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all absolute bottom-full right-0 mb-2 w-56 p-3 bg-slate-800 text-white text-xs rounded-lg shadow-xl z-50 pointer-events-none">
                        <p class="font-semibold mb-1 text-slate-200">Economia de Contexto</p>
                        <p class="leading-relaxed text-slate-300">Tecnologia que armazena prompts longos repetitivos.
                          Você paga até 90% menos ao reutilizar o mesmo contexto.</p>
                        <div class="absolute top-full right-4 -mt-1 border-4 border-transparent border-t-slate-800">
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="relative group">
                    <span class="absolute left-3 top-2.5 text-muted-foreground/60 text-sm">$</span>
                    <input type="number" id="cachedTokenPrice" step="0.01" placeholder="1.50"
                      class="w-full pl-6 pr-3 py-2 text-sm border border-input rounded-lg bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all hover:bg-secondary/20" />
                  </div>
                </div>
              </div>
            </div>

            <!-- Configuração de Venda -->
            <div class="space-y-4">
              <h3 class="text-sm font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-2">
                <iconify-icon icon="hugeicons:store-01" class="text-base"></iconify-icon>
                Revenda de Créditos
              </h3>

              <div class="grid grid-cols-2 gap-3">
                <div class="space-y-1.5">
                  <label for="markup" class="block text-xs font-medium text-muted-foreground">
                    Margem de Lucro (%)
                  </label>
                  <div class="relative group">
                    <span class="absolute left-3 top-2.5 text-muted-foreground/60 text-sm">%</span>
                    <input type="number" id="markup" step="0.1" value="30" placeholder="30"
                      class="w-full pl-8 pr-3 py-2 text-sm border border-input rounded-lg bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all hover:bg-secondary/20" />
                  </div>
                </div>

                <div class="space-y-1.5">
                  <label for="creditValue" class="block text-xs font-medium text-muted-foreground">
                    Valor do Crédito ($)
                  </label>
                  <div class="relative group">
                    <span class="absolute left-3 top-2.5 text-muted-foreground/60 text-sm">$</span>
                    <input type="number" id="creditValue" step="0.001" value="1.00" placeholder="1.00"
                      class="w-full pl-6 pr-3 py-2 text-sm border border-input rounded-lg bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all hover:bg-secondary/20" />
                  </div>
                </div>
              </div>
            </div>

            <!-- Exemplos de Texto -->
            <div class="space-y-4">
              <h3 class="text-sm font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-2">
                <iconify-icon icon="hugeicons:text-font" class="text-base"></iconify-icon>
                Conteúdo
              </h3>

              <div class="space-y-5">
                <div class="space-y-2">
                  <div class="flex justify-between items-center">
                    <label for="inputText" class="text-sm font-medium text-foreground">
                      Prompt do Usuário
                    </label>
                    <span class="text-xs text-muted-foreground bg-secondary px-2 py-0.5 rounded-full"
                      id="inputTokenCountDisplay">
                      <span id="inputTokenCount">0</span> tokens
                    </span>
                  </div>
                  <textarea id="inputText" rows="3" placeholder="Cole aqui o texto de entrada..."
                    class="w-full px-4 py-3 text-sm border border-input rounded-xl bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all resize-none hover:bg-secondary/20"></textarea>
                </div>

                <div class="space-y-2">
                  <div class="flex justify-between items-center">
                    <label for="outputText" class="text-sm font-medium text-foreground">
                      Resposta da IA
                    </label>
                    <span class="text-xs text-muted-foreground bg-secondary px-2 py-0.5 rounded-full"
                      id="outputTokenCountDisplay">
                      <span id="outputTokenCount">0</span> tokens
                    </span>
                  </div>
                  <textarea id="outputText" rows="3" placeholder="Cole aqui o exemplo de resposta..."
                    class="w-full px-4 py-3 text-sm border border-input rounded-xl bg-background shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all resize-none hover:bg-secondary/20"></textarea>
                </div>
              </div>
            </div>

            <!-- Quantidade -->
            <div class="pt-2">
              <div class="bg-secondary/30 rounded-xl p-4 border border-border/50">
                <div class="flex items-center justify-between mb-2">
                  <label for="quantity" class="text-sm font-medium text-foreground flex items-center gap-2">
                    <iconify-icon icon="hugeicons:multiplication-sign" class="text-amber-500"></iconify-icon>
                    Multiplicador
                  </label>
                  <span class="text-xs text-muted-foreground">Repetições/Chamadas</span>
                </div>
                <input type="number" id="quantity" min="1" value="1" placeholder="1"
                  class="w-full px-4 py-2 text-sm border border-input rounded-lg bg-white shadow-sm focus:outline-none focus:ring-1 focus:ring-primary focus:border-primary transition-all" />
              </div>
            </div>

            <!-- Botões -->
            <div class="grid grid-cols-2 gap-3 pt-2">
              <button type="button" id="clearBtn"
                class="px-4 py-2.5 rounded-xl border border-input bg-background hover:bg-secondary text-sm font-medium text-foreground transition-all focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-1 flex items-center justify-center gap-2">
                <iconify-icon icon="hugeicons:delete-02"></iconify-icon>
                Limpar
              </button>
              <button type="submit"
                class="px-4 py-2.5 rounded-xl bg-primary text-primary-foreground hover:bg-primary/90 text-sm font-medium shadow-sm hover:shadow-md transition-all focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-1 flex items-center justify-center gap-2">
                <iconify-icon icon="hugeicons:calculator-01"></iconify-icon>
                Calcular
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Área de Resultados (Right Column - 7 cols) -->
      <div class="xl:col-span-7">
        <!-- Estado Inicial (Empty State) -->
        <div id="initialState"
          class="h-full flex flex-col items-center justify-center text-center p-12 border-2 border-dashed border-border rounded-2xl bg-secondary/5 text-muted-foreground">
          <div class="w-16 h-16 bg-secondary rounded-2xl flex items-center justify-center mb-4">
            <iconify-icon icon="hugeicons:analytics-01" class="text-3xl opacity-50"></iconify-icon>
          </div>
          <h3 class="text-lg font-medium text-foreground mb-1">Aguardando Dados</h3>
          <p class="text-sm max-w-xs mx-auto">
            Preencha os parâmetros e clique em calcular para visualizar a estimativa de custos.
          </p>
        </div>

        <!-- Resultados (Hidden by default) -->
        <div id="results" class="hidden space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500">

          <!-- Cards de Resumo -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <!-- Custo Total -->
            <div class="bg-white rounded-2xl shadow-card border border-border p-5 relative overflow-hidden group">
              <div class="absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity">
                <iconify-icon icon="hugeicons:money-bag-02" class="text-6xl text-primary"></iconify-icon>
              </div>
              <p class="text-sm font-medium text-muted-foreground mb-1">Custo Estimado (USD)</p>
              <p id="totalCost" class="text-3xl font-bold text-foreground tracking-tight">$0.00</p>
              <div
                class="mt-2 flex items-center gap-1.5 text-emerald-600 bg-emerald-50 w-fit px-2 py-0.5 rounded-full text-xs font-medium border border-emerald-100">
                <iconify-icon icon="circle-flags:br"></iconify-icon>
                <span id="totalCostBRL">R$ 0,00</span>
              </div>
            </div>

            <!-- Total Tokens -->
            <div class="bg-white rounded-2xl shadow-card border border-border p-5 relative overflow-hidden group">
              <div class="absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity">
                <iconify-icon icon="hugeicons:cpu" class="text-6xl text-indigo-500"></iconify-icon>
              </div>
              <p class="text-sm font-medium text-muted-foreground mb-1">Volume Total de Tokens</p>
              <p id="totalTokens" class="text-3xl font-bold text-foreground tracking-tight">0</p>
              <p class="mt-2 text-xs text-muted-foreground">tokens processados na operação</p>
            </div>
          </div>

          <!-- Análise Financeira (Business Intelligence) -->
          <div class="bg-white rounded-2xl shadow-card border border-border overflow-hidden">
            <div class="px-6 py-4 border-b border-border bg-gray-50/50 flex items-center justify-between">
              <h3 class="font-semibold text-foreground flex items-center gap-2">
                <iconify-icon icon="hugeicons:profit" class="text-emerald-600"></iconify-icon>
                Economia do Negócio
              </h3>
              <span
                class="text-xs font-medium px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full border border-emerald-200">Revenda</span>
            </div>
            <div class="p-6 grid grid-cols-1 sm:grid-cols-2 gap-6">
              <div class="space-y-1">
                <p class="text-xs text-muted-foreground uppercase tracking-wide">Lucro Estimado</p>
                <div class="flex items-baseline gap-2">
                  <h4 id="finProfit" class="text-2xl font-bold text-emerald-600">$0.00</h4>
                  <span id="finProfitMargin"
                    class="text-xs font-medium text-emerald-600 bg-emerald-50 px-1.5 py-0.5 rounded">(0%)</span>
                </div>
                <p class="text-xs text-muted-foreground">Margem sobre o custo da API</p>
              </div>

              <div class="space-y-1">
                <p class="text-xs text-muted-foreground uppercase tracking-wide">Poder do Crédito</p>
                <h4 id="finTokensPerCredit" class="text-2xl font-bold text-indigo-600">0</h4>
                <p class="text-xs text-muted-foreground">tokens por Crédito de <span
                    id="finCreditValueBase">$1.00</span></p>
              </div>
            </div>
            <div class="px-6 py-3 bg-gray-50/50 border-t border-border grid grid-cols-2 gap-4 text-sm">
              <div class="flex justify-between">
                <span class="text-muted-foreground">Custo Compra (API):</span>
                <span id="finCostBuy" class="font-medium text-foreground">$0.00</span>
              </div>
              <div class="flex justify-between">
                <span class="text-muted-foreground">Preço Venda (Sugestão):</span>
                <span id="finPriceSell" class="font-medium text-foreground">$0.00</span>
              </div>
            </div>
          </div>

          <!-- Detalhamento -->
          <div class="bg-white rounded-2xl shadow-card border border-border overflow-hidden">
            <div class="px-6 py-4 border-b border-border bg-gray-50/50 flex items-center justify-between">
              <h3 class="font-semibold text-foreground flex items-center gap-2">
                <iconify-icon icon="hugeicons:chart-bar-line" class="text-primary"></iconify-icon>
                Detalhamento de Custos
              </h3>
            </div>
            <div class="divide-y divide-border">
              <!-- Input -->
              <div class="p-4 sm:px-6 hover:bg-gray-50/50 transition-colors grid grid-cols-3 items-center">
                <div class="col-span-1 flex items-center gap-3">
                  <div class="p-1.5 bg-blue-50 text-blue-600 rounded-lg">
                    <iconify-icon icon="hugeicons:inbox-in" class="text-xl"></iconify-icon>
                  </div>
                  <div>
                    <p class="text-sm font-medium text-foreground">Entrada</p>
                    <p class="text-xs text-muted-foreground">Prompt</p>
                  </div>
                </div>
                <div class="col-span-1 text-center">
                  <p id="inputTokensDetail" class="text-sm font-medium text-foreground">0</p>
                  <p class="text-xs text-muted-foreground">tokens</p>
                </div>
                <div class="col-span-1 text-right">
                  <p id="inputCostDetail" class="text-sm font-bold text-foreground">$0.00</p>
                </div>
              </div>

              <!-- Output -->
              <div class="p-4 sm:px-6 hover:bg-gray-50/50 transition-colors grid grid-cols-3 items-center">
                <div class="col-span-1 flex items-center gap-3">
                  <div class="p-1.5 bg-violet-50 text-violet-600 rounded-lg">
                    <iconify-icon icon="hugeicons:sent" class="text-xl"></iconify-icon>
                  </div>
                  <div>
                    <p class="text-sm font-medium text-foreground">Saída</p>
                    <p class="text-xs text-muted-foreground">Completion</p>
                  </div>
                </div>
                <div class="col-span-1 text-center">
                  <p id="outputTokensDetail" class="text-sm font-medium text-foreground">0</p>
                  <p class="text-xs text-muted-foreground">tokens</p>
                </div>
                <div class="col-span-1 text-right">
                  <p id="outputCostDetail" class="text-sm font-bold text-foreground">$0.00</p>
                </div>
              </div>

              <!-- Cache -->
              <div class="p-4 sm:px-6 hover:bg-gray-50/50 transition-colors grid grid-cols-3 items-center">
                <div class="col-span-1 flex items-center gap-3">
                  <div class="p-1.5 bg-amber-50 text-amber-600 rounded-lg">
                    <iconify-icon icon="hugeicons:database-01" class="text-xl"></iconify-icon>
                  </div>
                  <div>
                    <p class="text-sm font-medium text-foreground">Cache</p>
                    <p class="text-xs text-muted-foreground">Otimização</p>
                  </div>
                </div>
                <div class="col-span-1 text-center">
                  <p id="cachedTokensDetail" class="text-sm font-medium text-foreground">0</p>
                  <p class="text-xs text-muted-foreground">tokens</p>
                </div>
                <div class="col-span-1 text-right">
                  <p id="cachedCostDetail" class="text-sm font-bold text-foreground">$0.00</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Cenários -->
          <div id="multipleScenarios"
            class="hidden bg-white rounded-2xl shadow-card border border-border overflow-hidden">
            <div class="px-6 py-4 border-b border-border bg-gray-50/50">
              <h3 class="font-semibold text-foreground flex items-center gap-2">
                <iconify-icon icon="hugeicons:analytics-up" class="text-primary"></iconify-icon>
                Projeção de Escala
              </h3>
            </div>
            <div class="overflow-x-auto">
              <table class="w-full text-sm text-left">
                <thead class="bg-secondary/50 text-muted-foreground font-medium border-b border-border">
                  <tr>
                    <th class="px-6 py-3">Quantidade</th>
                    <th class="px-6 py-3">Total Tokens</th>
                    <th class="px-6 py-3 text-right">Custo Estimado</th>
                  </tr>
                </thead>
                <tbody id="scenariosTable" class="divide-y divide-border">
                  <!-- JS fills this -->
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="border-t border-border mt-auto bg-white/50 backdrop-blur-sm">
    <div
      class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex flex-col sm:flex-row justify-between items-center gap-4">
      <p class="text-sm text-muted-foreground">
        &copy; 2024 Calculadora de Tokens.
      </p>
      <div class="flex items-center gap-4 text-muted-foreground">
        <a href="#" class="hover:text-primary transition-colors hover:bg-secondary p-2 rounded-full">
          <iconify-icon icon="hugeicons:github" class="text-xl"></iconify-icon>
        </a>
        <a href="#" class="hover:text-primary transition-colors hover:bg-secondary p-2 rounded-full">
          <iconify-icon icon="hugeicons:twitter" class="text-xl"></iconify-icon>
        </a>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script type="module" src="js/utils.js"></script>
  <script type="module" src="js/calculator.js"></script>
  <script type="module" src="js/main.js"></script>
</body>

</html>